{% extends "base.html" %}

{% block content %}
<div class="dashboard-grid">
    <!-- Stats Overview -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-server"></i>
            </div>
            <div class="stat-content">
                <h3 id="serversCount">0</h3>
                <p>Servers</p>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                12%
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
                <h3 id="usersCount">0</h3>
                <p>Users</p>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                8%
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-commands"></i>
            </div>
            <div class="stat-content">
                <h3 id="commandsCount">0</h3>
                <p>Commands Used</p>
            </div>
            <div class="stat-trend up">
                <i class="fas fa-arrow-up"></i>
                23%
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-music"></i>
            </div>
            <div class="stat-content">
                <h3 id="musicPlayers">0</h3>
                <p>Music Players</p>
            </div>
            <div class="stat-trend down">
                <i class="fas fa-arrow-down"></i>
                5%
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="charts-row">
        <div class="chart-card">
            <div class="card-header">
                <h3>Command Usage</h3>
                <div class="time-filter">
                    <select id="timeFilter">
                        <option value="24h">24 Hours</option>
                        <option value="7d">7 Days</option>
                        <option value="30d">30 Days</option>
                    </select>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="commandChart"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="card-header">
                <h3>Server Growth</h3>
            </div>
            <div class="chart-container">
                <canvas id="growthChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Quick Actions & Recent Activity -->
    <div class="action-grid">
        <div class="quick-actions-card">
            <div class="card-header">
                <h3>Quick Actions</h3>
            </div>
            <div class="actions-grid">
                <button class="action-button" onclick="executeCommand('status')">
                    <i class="fas fa-info-circle"></i>
                    <span>Bot Status</span>
                </button>
                <button class="action-button" onclick="executeCommand('serverlist')">
                    <i class="fas fa-list"></i>
                    <span>Server List</span>
                </button>
                <button class="action-button" onclick="executeCommand('reload')">
                    <i class="fas fa-sync"></i>
                    <span>Reload Cogs</span>
                </button>
                <button class="action-button" onclick="showBroadcastModal()">
                    <i class="fas fa-broadcast-tower"></i>
                    <span>Broadcast</span>
                </button>
                <button class="action-button" onclick="executeCommand('ping')">
                    <i class="fas fa-network-wired"></i>
                    <span>Test Ping</span>
                </button>
                <button class="action-button" onclick="showSettings()">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </button>
            </div>
        </div>

        <div class="activity-card">
            <div class="card-header">
                <h3>Recent Activity</h3>
                <button class="view-all">View All</button>
            </div>
            <div class="activity-list" id="activityList">
                <div class="activity-item">
                    <div class="activity-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="activity-content">
                        <p>Bot started successfully</p>
                        <span class="activity-time">2 minutes ago</span>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon info">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="activity-content">
                        <p>New server joined: Test Server</p>
                        <span class="activity-time">5 minutes ago</span>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon warning">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="activity-content">
                        <p>High memory usage detected</p>
                        <span class="activity-time">10 minutes ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- System Status -->
    <div class="system-status-card">
        <div class="card-header">
            <h3>System Status</h3>
        </div>
        <div class="status-grid">
            <div class="status-item">
                <div class="status-info">
                    <span class="status-label">CPU Usage</span>
                    <span class="status-value" id="cpuUsage">0%</span>
                </div>
                <div class="status-bar">
                    <div class="status-progress" id="cpuProgress"></div>
                </div>
            </div>
            <div class="status-item">
                <div class="status-info">
                    <span class="status-label">Memory Usage</span>
                    <span class="status-value" id="memoryUsage">0MB</span>
                </div>
                <div class="status-bar">
                    <div class="status-progress" id="memoryProgress"></div>
                </div>
            </div>
            <div class="status-item">
                <div class="status-info">
                    <span class="status-label">Uptime</span>
                    <span class="status-value" id="uptime">0s</span>
                </div>
                <div class="status-bar">
                    <div class="status-progress" id="uptimeProgress"></div>
                </div>
            </div>
            <div class="status-item">
                <div class="status-info">
                    <span class="status-label">Latency</span>
                    <span class="status-value" id="latency">0ms</span>
                </div>
                <div class="status-bar">
                    <div class="status-progress" id="latencyProgress"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Broadcast Modal -->
<sl-dialog label="Broadcast Message" class="broadcast-modal" id="broadcastModal">
    <div class="modal-content">
        <sl-input label="Message" placeholder="Enter your broadcast message..." id="broadcastMessage"></sl-input>
        <sl-select label="Target" value="all">
            <sl-option value="all">All Servers</sl-option>
            <sl-option value="specific">Specific Server</sl-option>
        </sl-select>
        <sl-textarea label="Additional Notes" placeholder="Optional notes..." rows="3"></sl-textarea>
    </div>
    <sl-button slot="footer" variant="primary" onclick="sendBroadcast()">Send Broadcast</sl-button>
    <sl-button slot="footer" variant="default" onclick="hideBroadcastModal()">Cancel</sl-button>
</sl-dialog>

<script>
    // Initialize charts and real-time updates
    document.addEventListener('DOMContentLoaded', function() {
        initializeCharts();
        startRealTimeUpdates();
    });
</script>
{% endblock %}